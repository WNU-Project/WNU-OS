# Menu settings
set timeout=5
set default=0

# Set up graphics mode BEFORE launching the kernel
set gfxmode=800x600x32
set gfxpayload=keep
terminal_output gfxterm

# Main WNU OS options
menuentry "WNU OS Server 1.0.0.11.15.2025.RC1 LIVE (REAL GRAPHICS!)" {
    # Force framebuffer graphics mode
    set gfxmode=800x600x32
    set gfxpayload=keep
    insmod gfxterm
    insmod vbe
    insmod vga
    terminal_output gfxterm
    
    # Launch kernel with framebuffer ready
    multiboot2 /boot/live_wnu_os_server.bin
    boot
}

# Legacy options
submenu "Legacy Versions (WARNING: ONE OF THEM MAY PRINT UNICODE OR CAUSE KERNEL PANIC)" {
    menuentry "WNU OS Server (OUTDATED)" {
        multiboot2 /boot/kernel.bin
        boot
    }
    
    menuentry "WNU OS Server (MINIMAL)" {
        multiboot2 /boot/minimal_kernel.bin
        boot
    }
}

# Advanced options
submenu "Advanced Options" {
    
    menuentry "System Information" {
        clear
        echo "=== WNU OS Server System Information ==="
        echo "CPU Architecture: ${grub_cpu}"
        echo "Platform: ${grub_platform}"
        echo "GRUB Version: ${grub_version}"
        echo "Boot Device: ${root}"
        echo ""
        echo "Press any key to continue..."
        read
    }
}

# System options
menuentry "Reboot System" {
    echo "Rebooting system..."
    reboot
}

menuentry "Shutdown System" {
    echo "Shutting down system..."
    halt
}